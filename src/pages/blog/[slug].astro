---
import BaseLayout from '../../layouts/BaseLayout.astro';
import LeadForm from '../../components/LeadForm.astro';
import CTASection from '../../components/CTASection.astro';

export async function getStaticPaths() {
  // Sample blog post data - in production this would come from a CMS
  const blogPosts: Record<string, any> = {
    'what-is-local-seo': {
      title: 'What Is Local SEO? A Complete Guide for Small Businesses',
      excerpt: 'Learn how local SEO helps small businesses get found by nearby customers searching on Google.',
      date: '2024-01-15',
      category: 'Local SEO',
      readTime: '8 min read',
      author: 'Search Engine Coach Team',
      content: `
        <p>Local SEO is the practice of optimizing your online presence to attract more business from relevant local searches on Google and other search engines. For small businesses serving specific geographic areas, local SEO is often the most impactful form of search engine optimization.</p>
        
        <h2>Why Local SEO Matters</h2>
        <p>Consider this: 46% of all Google searches have local intent. When someone searches for "plumber near me" or "best pizza in Chicago," they're looking for local businesses. If your business doesn't appear in these searches, you're invisible to potential customers at the exact moment they're ready to buy.</p>
        <p>Local SEO helps you:</p>
        <ul>
          <li>Appear in Google's local "Map Pack" results</li>
          <li>Rank higher for "[service] + [city]" searches</li>
          <li>Drive foot traffic to physical locations</li>
          <li>Generate phone calls and online inquiries from local customers</li>
          <li>Build trust through reviews and local citations</li>
        </ul>
        
        <h2>Key Local SEO Ranking Factors</h2>
        <p>Google uses several factors to determine local search rankings:</p>
        
        <h3>1. Google Business Profile</h3>
        <p>Your Google Business Profile (formerly Google My Business) is the cornerstone of local SEO. A complete, optimized profile significantly increases your chances of appearing in the local pack. Key elements include:</p>
        <ul>
          <li>Accurate business name, address, and phone number (NAP)</li>
          <li>Correct business categories</li>
          <li>Business hours and special hours</li>
          <li>High-quality photos</li>
          <li>Regular posts and updates</li>
          <li>Customer reviews and responses</li>
        </ul>
        
        <h3>2. On-Page SEO</h3>
        <p>Your website needs to be optimized for local searches. This includes:</p>
        <ul>
          <li>Location-specific title tags and meta descriptions</li>
          <li>City and service area mentions in content</li>
          <li>Local schema markup</li>
          <li>Mobile-friendly design</li>
          <li>Fast loading speeds</li>
        </ul>
        
        <h3>3. Citations and NAP Consistency</h3>
        <p>Citations are mentions of your business name, address, and phone number on other websites. Consistency across all citations is crucial. Even small discrepancies (like "Street" vs "St.") can confuse search engines and hurt rankings.</p>
        
        <h3>4. Reviews</h3>
        <p>Online reviews are a powerful local ranking factor. Google considers both the quantity and quality of reviews, as well as how recently they were posted. Actively managing your review profile—encouraging satisfied customers to leave reviews and responding to all feedback—is essential.</p>
        
        <h3>5. Link Building</h3>
        <p>Links from other local websites, such as chambers of commerce, local news sites, and industry directories, signal to Google that your business is a trusted local authority.</p>
        
        <h2>Getting Started with Local SEO</h2>
        <p>If you're new to local SEO, start with these steps:</p>
        <ol>
          <li><strong>Claim and optimize your Google Business Profile</strong> - This is your highest-impact activity</li>
          <li><strong>Audit your NAP consistency</strong> - Ensure your business information is identical everywhere</li>
          <li><strong>Add local pages to your website</strong> - Create content targeting each city or area you serve</li>
          <li><strong>Start building reviews</strong> - Develop a system for asking satisfied customers for feedback</li>
          <li><strong>Build local citations</strong> - Submit your business to relevant directories</li>
        </ol>
        
        <h2>When to Hire Professional Help</h2>
        <p>While some local SEO tasks are DIY-friendly, many businesses benefit from professional help. Consider hiring an SEO professional if:</p>
        <ul>
          <li>You're in a competitive market with multiple strong competitors</li>
          <li>You don't have time to consistently manage your online presence</li>
          <li>You've tried DIY approaches without seeing results</li>
          <li>You want to scale to multiple locations</li>
        </ul>
        
        <h2>Conclusion</h2>
        <p>Local SEO isn't optional for businesses serving geographic areas—it's essential. The businesses that invest in local search visibility are the ones capturing customers at their moment of need. Whether you handle it yourself or work with professionals, prioritizing local SEO is one of the smartest marketing investments you can make.</p>
      `
    }
  };

  return Object.keys(blogPosts).map(slug => ({
    params: { slug },
    props: { post: blogPosts[slug], slug }
  }));
}

const { post, slug } = Astro.props;

// Related posts (sample)
const relatedPosts = [
  { slug: 'google-business-profile-optimization', title: 'How to Optimize Your Google Business Profile' },
  { slug: 'how-much-does-seo-cost', title: 'How Much Does SEO Cost?' }
];

// Article schema
const articleSchema = {
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": post.title,
  "description": post.excerpt,
  "author": {
    "@type": "Organization",
    "name": "Search Engine Coach"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Search Engine Coach",
    "url": "https://searchenginecoach.com"
  },
  "datePublished": post.date,
  "dateModified": post.date,
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": `https://searchenginecoach.com/blog/${slug}/`
  }
};
---

<BaseLayout
  title={`${post.title} | Search Engine Coach`}
  description={post.excerpt}
  canonicalUrl={`/blog/${slug}/`}
  schema={articleSchema}
>
  <article class="blog-article">
    <div class="container">
      <!-- Article Header -->
      <header class="article-header">
        <nav class="breadcrumb" aria-label="Breadcrumb">
          <a href="/">Home</a>
          <span>/</span>
          <a href="/blog/">Blog</a>
          <span>/</span>
          <span>{post.title}</span>
        </nav>
        
        <div class="article-meta-top">
          <span class="article-category">{post.category}</span>
        </div>
        
        <h1>{post.title}</h1>
        
        <div class="article-meta">
          <span class="article-author">{post.author}</span>
          <span class="article-separator">•</span>
          <time datetime={post.date}>
            {new Date(post.date).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}
          </time>
          <span class="article-separator">•</span>
          <span>{post.readTime}</span>
        </div>
      </header>
      
      <!-- Article Content Grid -->
      <div class="article-grid">
        <div class="article-content prose" set:html={post.content} />
        
        <aside class="article-sidebar">
          <div class="sidebar-sticky">
            <div class="sidebar-cta">
              <h3>Need Help With Your SEO?</h3>
              <p>Get matched with experts who can help your business rank higher.</p>
              <a href="/#lead-form" class="btn btn-primary">Get Free Strategy</a>
            </div>
            
            <div class="sidebar-related">
              <h3>Related Articles</h3>
              <ul>
                {relatedPosts.map(related => (
                  <li><a href={`/blog/${related.slug}/`}>{related.title}</a></li>
                ))}
              </ul>
            </div>
          </div>
        </aside>
      </div>
      
      <!-- Article Footer -->
      <footer class="article-footer">
        <div class="article-share">
          <span>Share this article:</span>
          <div class="share-buttons">
            <a href={`https://twitter.com/intent/tweet?text=${encodeURIComponent(post.title)}&url=https://searchenginecoach.com/blog/${slug}/`} target="_blank" rel="noopener" class="share-btn">
              Twitter
            </a>
            <a href={`https://www.linkedin.com/shareArticle?mini=true&url=https://searchenginecoach.com/blog/${slug}/&title=${encodeURIComponent(post.title)}`} target="_blank" rel="noopener" class="share-btn">
              LinkedIn
            </a>
          </div>
        </div>
      </footer>
    </div>
  </article>
  
  <!-- CTA -->
  <CTASection 
    heading="Ready to Improve Your SEO?"
    subheading="Get your free SEO strategy and discover how to rank higher in your market."
    buttonText="Get Started"
  />
</BaseLayout>

<style>
  .blog-article {
    padding: var(--space-8) 0 var(--space-16);
  }
  
  .article-header {
    max-width: 800px;
    margin: 0 auto var(--space-10);
  }
  
  .breadcrumb {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    color: var(--color-text-muted);
    margin-bottom: var(--space-6);
  }
  
  .breadcrumb a {
    color: var(--color-text-muted);
  }
  
  .breadcrumb a:hover {
    color: var(--color-primary);
  }
  
  .article-meta-top {
    margin-bottom: var(--space-4);
  }
  
  .article-category {
    display: inline-block;
    padding: var(--space-1) var(--space-3);
    background: rgba(26, 86, 219, 0.1);
    color: var(--color-primary);
    font-size: var(--text-sm);
    font-weight: 500;
    border-radius: var(--radius-full);
  }
  
  .article-header h1 {
    font-size: var(--text-3xl);
    line-height: 1.2;
    margin-bottom: var(--space-4);
  }
  
  @media (min-width: 768px) {
    .article-header h1 {
      font-size: var(--text-4xl);
    }
  }
  
  .article-meta {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: var(--space-2);
    color: var(--color-text-light);
    font-size: var(--text-sm);
  }
  
  .article-separator {
    color: var(--color-text-muted);
  }
  
  /* Article Grid */
  .article-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-10);
    max-width: 1100px;
    margin: 0 auto;
  }
  
  @media (min-width: 1024px) {
    .article-grid {
      grid-template-columns: 1fr 300px;
    }
  }
  
  /* Prose Styling */
  .article-content.prose {
    max-width: none;
  }
  
  .article-content h2 {
    font-size: var(--text-2xl);
    margin-top: var(--space-10);
    margin-bottom: var(--space-4);
  }
  
  .article-content h3 {
    font-size: var(--text-xl);
    margin-top: var(--space-8);
    margin-bottom: var(--space-3);
  }
  
  .article-content p {
    line-height: 1.8;
    margin-bottom: var(--space-4);
  }
  
  .article-content ul,
  .article-content ol {
    margin-bottom: var(--space-4);
    padding-left: var(--space-6);
  }
  
  .article-content li {
    margin-bottom: var(--space-2);
    line-height: 1.7;
  }
  
  .article-content strong {
    font-weight: 600;
    color: var(--color-secondary);
  }
  
  /* Sidebar */
  .article-sidebar {
    display: none;
  }
  
  @media (min-width: 1024px) {
    .article-sidebar {
      display: block;
    }
  }
  
  .sidebar-sticky {
    position: sticky;
    top: 100px;
    display: flex;
    flex-direction: column;
    gap: var(--space-6);
  }
  
  .sidebar-cta,
  .sidebar-related {
    background: white;
    border: 1px solid var(--color-border-light);
    border-radius: var(--radius-xl);
    padding: var(--space-6);
  }
  
  .sidebar-cta {
    background: linear-gradient(135deg, #f0f7ff 0%, #e0efff 100%);
    text-align: center;
  }
  
  .sidebar-cta h3 {
    font-size: var(--text-lg);
    margin-bottom: var(--space-2);
  }
  
  .sidebar-cta p {
    font-size: var(--text-sm);
    color: var(--color-text-light);
    margin-bottom: var(--space-4);
  }
  
  .sidebar-related h3 {
    font-size: var(--text-base);
    margin-bottom: var(--space-4);
  }
  
  .sidebar-related ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  
  .sidebar-related li {
    margin-bottom: var(--space-3);
  }
  
  .sidebar-related a {
    font-size: var(--text-sm);
    color: var(--color-text);
    line-height: 1.4;
  }
  
  .sidebar-related a:hover {
    color: var(--color-primary);
  }
  
  /* Footer */
  .article-footer {
    max-width: 800px;
    margin: var(--space-10) auto 0;
    padding-top: var(--space-6);
    border-top: 1px solid var(--color-border-light);
  }
  
  .article-share {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    flex-wrap: wrap;
  }
  
  .article-share span {
    font-size: var(--text-sm);
    color: var(--color-text-light);
  }
  
  .share-buttons {
    display: flex;
    gap: var(--space-2);
  }
  
  .share-btn {
    padding: var(--space-2) var(--space-4);
    background: var(--color-bg-alt);
    border-radius: var(--radius-md);
    font-size: var(--text-sm);
    font-weight: 500;
    color: var(--color-text);
    text-decoration: none;
    transition: all var(--transition-fast);
  }
  
  .share-btn:hover {
    background: var(--color-primary);
    color: white;
  }
</style>

